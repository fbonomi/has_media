<%- namespace, object = object if object.is_a?(Array) %>
<%- klass    = object.class.to_s.underscore %>
<%- multiple = object.send(context).is_a?(Array) %>

<%- unless defined?(formtastic) == "local-variable" %>

  <span id="<%= generate_uid(:object => object, :context => context) %>">
  
    <%= label_tag "#{klass}[#{context}]#{'[]' if multiple}", 
      t(context, :scope => [:activerecord, :attributes, klass]) %>
  
    <%= file_field_tag "#{klass}[#{context}]#{'[]' if multiple}" %>

  </span>

<%- else %>

  <%= formtastic.input context, :as => :file %>

<%- end %>
